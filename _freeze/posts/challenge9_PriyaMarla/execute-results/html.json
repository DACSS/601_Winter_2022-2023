{
  "hash": "2ed29fcb18f0d931e02cd29a9fca35b5",
  "result": {
    "markdown": "---\ntitle: \"Challenge 9\"\nauthor: \"Priya Marla\"\ndescription: \"Creating a function\"\ndate: \"1/26/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_9\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(here)\nlibrary(readxl)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is simple. Create a function, and use it to perform a data analysis / cleaning / visualization task:\n\nExamples of such functions are:\n1) A function that reads in and cleans a dataset.  \n2) A function that computes summary statistics (e.g., computes the z score for a variable).  \n3) A function that plots a histogram.  \n\nThat's it!\n\n## Functions\n\nBelow are few functions for reading the data, getting the summary of the data, getting the stats of the data and plotting the histogram for the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#function for reading data\nread_data <- function(file_name, file_type, n_max = 1000, skip = 0) {\n  if (file_type == \"excel\"){\n    read_excel(here(\"posts\",\"_data\",file_name), skip = skip, n_max = n_max)\n  }\n  else if (file_type == \"csv\"){\n    read_csv(here(\"posts\",\"_data\",file_name))\n  }\n}\n\n#function for getting the summary of the entire dataset\nget_summary <- function(dataset){\n  s <- summary(dataset)\n  print(s)\n}\n\n#function for getting the stats of a particular column\nget_stats <- function(col) {\n  if (class(col) == \"numeric\"){\n    print(paste(\"Max: \",max(col, na.rm = TRUE)))\n    print(paste(\"Min: \", min(col, na.rm = TRUE)))\n    print(paste(\"Mean: \", mean(col, na.rm = TRUE)))\n    print(paste(\"Median: \", median(col, na.rm = TRUE)))\n    print(paste(\"sum: \", sum(col, na.rm = TRUE)))\n  }\n  else if (class(col) == \"character\") {\n    table(col)\n  }\n}\n\n#function for plotting histogram\nget_hist <- function(cols,colname) {\n  title <- str_c(\"Histogram for \",colname)\n  hist(cols, col = \"purple\", main = title, xlab = colname)\n}\n```\n:::\n\n\n### Analysis for Airbnb in New York City dataset:\n\n\"AB_NYC_2019.csv\" dataset consists of a list of airbnb's in 5 boroughs in New York City. There are 48895 rows and 16 columns. Each column represents specific data about the airbnb like location, owner, rating, etc.\n\nCalling the above defined functions for further analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#calling the function read_data (csv file)\ndata <- read_data(\"AB_NYC_2019.csv\",\"csv\")\n\ndata #printing the data\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 48,895 × 16\n      id name      host_id host_…¹ neigh…² neigh…³ latit…⁴ longi…⁵ room_…⁶ price\n   <dbl> <chr>       <dbl> <chr>   <chr>   <chr>     <dbl>   <dbl> <chr>   <dbl>\n 1  2539 Clean & …    2787 John    Brookl… Kensin…    40.6   -74.0 Privat…   149\n 2  2595 Skylit M…    2845 Jennif… Manhat… Midtown    40.8   -74.0 Entire…   225\n 3  3647 THE VILL…    4632 Elisab… Manhat… Harlem     40.8   -73.9 Privat…   150\n 4  3831 Cozy Ent…    4869 LisaRo… Brookl… Clinto…    40.7   -74.0 Entire…    89\n 5  5022 Entire A…    7192 Laura   Manhat… East H…    40.8   -73.9 Entire…    80\n 6  5099 Large Co…    7322 Chris   Manhat… Murray…    40.7   -74.0 Entire…   200\n 7  5121 BlissArt…    7356 Garon   Brookl… Bedfor…    40.7   -74.0 Privat…    60\n 8  5178 Large Fu…    8967 Shunic… Manhat… Hell's…    40.8   -74.0 Privat…    79\n 9  5203 Cozy Cle…    7490 MaryEl… Manhat… Upper …    40.8   -74.0 Privat…    79\n10  5238 Cute & C…    7549 Ben     Manhat… Chinat…    40.7   -74.0 Entire…   150\n# … with 48,885 more rows, 6 more variables: minimum_nights <dbl>,\n#   number_of_reviews <dbl>, last_review <date>, reviews_per_month <dbl>,\n#   calculated_host_listings_count <dbl>, availability_365 <dbl>, and\n#   abbreviated variable names ¹​host_name, ²​neighbourhood_group,\n#   ³​neighbourhood, ⁴​latitude, ⁵​longitude, ⁶​room_type\n```\n:::\n\n```{.r .cell-code}\n#calling the function get_stats\nget_stats(data$price) #getting stats for price column\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Max:  10000\"\n[1] \"Min:  0\"\n[1] \"Mean:  152.720687186829\"\n[1] \"Median:  106\"\n[1] \"sum:  7467278\"\n```\n:::\n\n```{.r .cell-code}\nget_stats(data$neighbourhood_group) #getting stats for neighbourhood_group column\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ncol\n        Bronx      Brooklyn     Manhattan        Queens Staten Island \n         1091         20104         21661          5666           373 \n```\n:::\n\n```{.r .cell-code}\n#calling the function get_summary\nget_summary(data) #getting summary of entire dataset\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       id               name              host_id           host_name        \n Min.   :    2539   Length:48895       Min.   :     2438   Length:48895      \n 1st Qu.: 9471945   Class :character   1st Qu.:  7822033   Class :character  \n Median :19677284   Mode  :character   Median : 30793816   Mode  :character  \n Mean   :19017143                      Mean   : 67620011                     \n 3rd Qu.:29152178                      3rd Qu.:107434423                     \n Max.   :36487245                      Max.   :274321313                     \n                                                                             \n neighbourhood_group neighbourhood         latitude       longitude     \n Length:48895        Length:48895       Min.   :40.50   Min.   :-74.24  \n Class :character    Class :character   1st Qu.:40.69   1st Qu.:-73.98  \n Mode  :character    Mode  :character   Median :40.72   Median :-73.96  \n                                        Mean   :40.73   Mean   :-73.95  \n                                        3rd Qu.:40.76   3rd Qu.:-73.94  \n                                        Max.   :40.91   Max.   :-73.71  \n                                                                        \n  room_type             price         minimum_nights    number_of_reviews\n Length:48895       Min.   :    0.0   Min.   :   1.00   Min.   :  0.00   \n Class :character   1st Qu.:   69.0   1st Qu.:   1.00   1st Qu.:  1.00   \n Mode  :character   Median :  106.0   Median :   3.00   Median :  5.00   \n                    Mean   :  152.7   Mean   :   7.03   Mean   : 23.27   \n                    3rd Qu.:  175.0   3rd Qu.:   5.00   3rd Qu.: 24.00   \n                    Max.   :10000.0   Max.   :1250.00   Max.   :629.00   \n                                                                         \n  last_review         reviews_per_month calculated_host_listings_count\n Min.   :2011-03-28   Min.   : 0.010    Min.   :  1.000               \n 1st Qu.:2018-07-08   1st Qu.: 0.190    1st Qu.:  1.000               \n Median :2019-05-19   Median : 0.720    Median :  1.000               \n Mean   :2018-10-04   Mean   : 1.373    Mean   :  7.144               \n 3rd Qu.:2019-06-23   3rd Qu.: 2.020    3rd Qu.:  2.000               \n Max.   :2019-07-08   Max.   :58.500    Max.   :327.000               \n NA's   :10052        NA's   :10052                                   \n availability_365\n Min.   :  0.0   \n 1st Qu.:  0.0   \n Median : 45.0   \n Mean   :112.8   \n 3rd Qu.:227.0   \n Max.   :365.0   \n                 \n```\n:::\n\n```{.r .cell-code}\n#calling the function get_hist\nget_hist(data$price,\"price\") #plotting histogram for price column\n```\n\n::: {.cell-output-display}\n![](challenge9_PriyaMarla_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n### Analysis for USA households dataset\n\nThis dataset describes the income statistics of various races over the years. The data shows what percentage of people fall under each income category i.e ranging from under $15,000 to $200,000 per year. The mean and median of the income is also calculated in the columns 13 and 15. The statistics are calculated all races combine and also separate for different races.\n\nFor this analysis considering only \"All Race\" data. Calling various function to get the analysis\n\n::: {.cell}\n\n```{.r .cell-code}\n#calling the function read_data\ndb <- read_data(\"USA Households by Total Money Income, Race, and Hispanic Origin of Householder 1967 to 2019.xlsx\",\"excel\", 55, 5)\n\ndb #to print the data\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 55 × 16\n   ALL RACE…¹   ...2  ...3  ...4  ...5  ...6  ...7  ...8  ...9 ...10 ...11 ...12\n   <chr>       <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n 1 2019       128451   100   9.1   8     8.3  11.7  16.5  12.3  15.5   8.3  10.3\n 2 2018       128579   100  10.1   8.8   8.7  12    17    12.5  15     7.2   8.8\n 3 2017 2     127669   100  10     9.1   9.2  12    16.4  12.4  14.7   7.3   8.9\n 4 2017       127586   100  10.1   9.1   9.2  11.9  16.3  12.6  14.8   7.5   8.5\n 5 2016       126224   100  10.4   9     9.2  12.3  16.7  12.2  15     7.2   8  \n 6 2015       125819   100  10.6  10     9.6  12.1  16.1  12.4  14.9   7.1   7.2\n 7 2014       124587   100  11.4  10.5   9.6  12.6  16.4  12.1  14     6.6   6.8\n 8 2013 3     123931   100  11.4  10.3   9.5  12.5  16.8  12    13.9   6.7   6.9\n 9 2013 4     122952   100  11.3  10.4   9.7  13.1  17    12.5  13.6   6.3   6  \n10 2012       122459   100  11.4  10.6  10.1  12.5  17.4  12    13.9   6.3   5.9\n# … with 45 more rows, 4 more variables: ...13 <dbl>, ...14 <dbl>, ...15 <dbl>,\n#   ...16 <dbl>, and abbreviated variable name ¹​`ALL RACES`\n```\n:::\n\n```{.r .cell-code}\n#calling the function get_stats\nget_stats(db$...4) #getting stats for income under $15,000\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Max:  14.8\"\n[1] \"Min:  9\"\n[1] \"Mean:  11.2727272727273\"\n[1] \"Median:  11.4\"\n[1] \"sum:  620\"\n```\n:::\n\n```{.r .cell-code}\nget_stats(db$...15) #getting stats for mean of total income for the year\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Max:  98088\"\n[1] \"Min:  53616\"\n[1] \"Mean:  73749.0727272727\"\n[1] \"Median:  73816\"\n[1] \"sum:  4056199\"\n```\n:::\n\n```{.r .cell-code}\n#calling the function get_summary\nget_summary(db)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  ALL RACES              ...2             ...3          ...4      \n Length:55          Min.   : 60813   Min.   :100   Min.   : 9.00  \n Class :character   1st Qu.: 82948   1st Qu.:100   1st Qu.:10.30  \n Mode  :character   Median : 98990   Median :100   Median :11.40  \n                    Mean   : 98488   Mean   :100   Mean   :11.27  \n                    3rd Qu.:116982   3rd Qu.:100   3rd Qu.:12.00  \n                    Max.   :128579   Max.   :100   Max.   :14.80  \n      ...5            ...6             ...7            ...8      \n Min.   : 8.00   Min.   : 8.300   Min.   :11.70   Min.   :16.10  \n 1st Qu.: 9.80   1st Qu.: 9.400   1st Qu.:12.90   1st Qu.:17.40  \n Median :10.20   Median : 9.700   Median :13.40   Median :18.40  \n Mean   :10.15   Mean   : 9.784   Mean   :13.65   Mean   :19.14  \n 3rd Qu.:10.60   3rd Qu.:10.100   3rd Qu.:14.35   3rd Qu.:20.70  \n Max.   :11.40   Max.   :11.000   Max.   :16.80   Max.   :24.80  \n      ...9           ...10           ...11           ...12       \n Min.   :11.90   Min.   : 7.70   Min.   :1.700   Min.   : 1.100  \n 1st Qu.:12.55   1st Qu.:11.95   1st Qu.:3.250   1st Qu.: 2.050  \n Median :13.30   Median :13.90   Median :5.100   Median : 4.200  \n Mean   :13.30   Mean   :13.32   Mean   :4.969   Mean   : 4.409  \n 3rd Qu.:13.90   3rd Qu.:14.85   3rd Qu.:6.300   3rd Qu.: 6.200  \n Max.   :15.10   Max.   :15.60   Max.   :8.300   Max.   :10.300  \n     ...13           ...14            ...15           ...16       \n Min.   :47938   Min.   : 268.0   Min.   :53616   Min.   : 287.0  \n 1st Qu.:52911   1st Qu.: 334.5   1st Qu.:62547   1st Qu.: 380.5  \n Median :56945   Median : 431.0   Median :73816   Median : 495.0  \n Mean   :56879   Mean   : 453.4   Mean   :73749   Mean   : 550.9  \n 3rd Qu.:60398   3rd Qu.: 480.0   3rd Qu.:82374   3rd Qu.: 701.5  \n Max.   :68703   Max.   :1183.0   Max.   :98088   Max.   :1201.0  \n```\n:::\n\n```{.r .cell-code}\n#calling the function get_hist\nget_hist(db$...15,\"Mean Income\")\n```\n\n::: {.cell-output-display}\n![](challenge9_PriyaMarla_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challenge9_PriyaMarla_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}