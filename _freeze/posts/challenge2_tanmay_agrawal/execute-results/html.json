{
  "hash": "b356e171723d20e5437b3123672945c6",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2 Instructions\"\nauthor: \"Sean Conway\"\ndescription: \"Data wrangling: using group() and summarise()\"\ndate: \"12/21/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to\n\n1)  read in a data set, and describe the data using both words and any supporting information (e.g., tables, etc)\n2)  provide summary statistics for different interesting groups within the data, and interpret those statistics\n\n## Read in the Data\n\nRead in one (or more) of the following data sets, available in the `posts/_data` folder, using the correct R package and command.\n\n-   railroad\\*.csv or StateCounty2012.xlsx ⭐\n-   FAOstat\\*.csv ⭐⭐⭐\n-   hotel_bookings ⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load the libs\nlibrary(readr)\nlibrary(readxl)\n\n# read the data using standard csv loading function\ndata = read_csv(\"../posts/_data/railroad_2012_clean_county.csv\")\n```\n:::\n\n\nAdd any comments or documentation as needed. More challenging data may require additional code chunks and documentation.\n\n## Describe the data\n\nUsing a combination of words and results of R commands, can you provide a high level description of the data? Describe as efficiently as possible where/how the data was (likely) gathered, indicate the cases and variables (both the interpretation and any details you deem useful to the reader to fully understand your chosen data).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# describe the data using str, brief summary of the columns, datatypes, sizes tell us that there are 3 columns with 2930 rows.\nstr(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nspc_tbl_ [2,930 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ state          : chr [1:2930] \"AE\" \"AK\" \"AK\" \"AK\" ...\n $ county         : chr [1:2930] \"APO\" \"ANCHORAGE\" \"FAIRBANKS NORTH STAR\" \"JUNEAU\" ...\n $ total_employees: num [1:2930] 2 7 2 3 2 1 88 102 143 1 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   state = col_character(),\n  ..   county = col_character(),\n  ..   total_employees = col_double()\n  .. )\n - attr(*, \"problems\")=<externalptr> \n```\n:::\n\n```{.r .cell-code}\n# show the first few entries using the head command\nhead(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  state county               total_employees\n  <chr> <chr>                          <dbl>\n1 AE    APO                                2\n2 AK    ANCHORAGE                          7\n3 AK    FAIRBANKS NORTH STAR               2\n4 AK    JUNEAU                             3\n5 AK    MATANUSKA-SUSITNA                  2\n6 AK    SITKA                              1\n```\n:::\n\n```{.r .cell-code}\n# from a cursory analysis, it looks like the dataset describes the number of rail road employees by counties and their corresponding states.\n\n\n# We can show the top-3 counties along with their states with the highest `total_employees` count\ndata %>%\n  distinct(state, total_employees) %>%\n  arrange(desc(total_employees)) %>%\n  top_n(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  state total_employees\n  <chr>           <dbl>\n1 IL               8207\n2 TX               4235\n3 NE               3797\n```\n:::\n\n```{.r .cell-code}\n# Similarly we could also look at the bottom 3.\ndata %>%\n  distinct(state, total_employees) %>%\n  arrange(total_employees) %>%\n  head(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  state total_employees\n  <chr>           <dbl>\n1 AK                  1\n2 AL                  1\n3 AP                  1\n```\n:::\n:::\n\n\nWe can also look at the distinct states, turns out they have more than 50 unique entries in the state column. This means that the state column has some additional entries that represent places that can be considered a state for all intents and purposes for railroad employee data. These could be overseas territories.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>%\n  distinct(state)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 × 1\n   state\n   <chr>\n 1 AE   \n 2 AK   \n 3 AL   \n 4 AP   \n 5 AR   \n 6 AZ   \n 7 CA   \n 8 CO   \n 9 CT   \n10 DC   \n# … with 43 more rows\n```\n:::\n:::\n\n\nOverall the dataset is a simple record of railroad employee by state and counties which could be used to allocate resources to these states based on their needs and requirements.\n\n\n## Provide Grouped Summary Statistics\n\nConduct some exploratory data analysis, using dplyr commands such as `group_by()`, `select()`, `filter()`, and `summarise()`. Find the central tendency (mean, median, mode) and dispersion (standard deviation, mix/max/quantile) for different subgroups within the data set.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# We look at the states arranged by the standard deviation of total_employee count among the counties in that state alongside other central tendencies.\n\ndata %>%\n  group_by(state) %>%\n  summarise(mean_=mean(total_employees),\n            median_=median(total_employees),\n            sd_=sd(`total_employees`)) %>%\n              arrange(desc(sd_)\n            )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 × 4\n   state mean_ median_   sd_\n   <chr> <dbl>   <dbl> <dbl>\n 1 IL    186.     42    829.\n 2 DE    498.    158    674.\n 3 NY    280.     71    591.\n 4 CA    239.     61    549.\n 5 CT    324     125    520.\n 6 NE    148.     15    512.\n 7 FL    111.     20    386.\n 8 TX     89.8    17    350.\n 9 VA     82.1    25.5  341.\n10 NJ    397.    296    338.\n# … with 43 more rows\n```\n:::\n:::\n\n\nWe can use an arbitrary threshold of `sd>300` to check which states have the biggest disparity in terms of employee counts in different counties. We also only look at the states with a mean employee count of at most `100` to better investigate states where the high spread is a function of very high variability in the employee counts of the counties of those states.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>%\n  group_by(state) %>%\n  summarise(mean_=mean(total_employees),\n            median_=median(total_employees),\n            sd_=sd(`total_employees`)) %>%\n              filter(mean_<100, sd_>300) %>%\n              arrange(desc(sd_))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 4\n  state mean_ median_   sd_\n  <chr> <dbl>   <dbl> <dbl>\n1 TX     89.8    17    350.\n2 VA     82.1    25.5  341.\n```\n:::\n:::\n\n\nWe get 2 such states, Texas (TX) and Virginia (VA). We can do further analysis on these two states.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>%\n  filter(`state`=='TX' | `state`=='VA') %>%\n  arrange(total_employees) # 313 total counties\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 313 × 3\n   state county   total_employees\n   <chr> <chr>              <dbl>\n 1 TX    BAYLOR                 1\n 2 TX    CONCHO                 1\n 3 TX    CROCKETT               1\n 4 TX    DIMMIT                 1\n 5 TX    DONLEY                 1\n 6 TX    DUVAL                  1\n 7 TX    EDWARDS                1\n 8 TX    FOARD                  1\n 9 TX    HANSFORD               1\n10 TX    KNOX                   1\n# … with 303 more rows\n```\n:::\n\n```{.r .cell-code}\ndata %>%\n  filter(`state`=='TX') %>%\n  arrange(desc(total_employees)) # 221 total counties with \"Tarrant\" and \"Harris\" accounting for most of the disparity\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 221 × 3\n   state county     total_employees\n   <chr> <chr>                <dbl>\n 1 TX    TARRANT               4235\n 2 TX    HARRIS                2535\n 3 TX    BEXAR                  950\n 4 TX    POTTER                 883\n 5 TX    EL PASO                863\n 6 TX    MONTGOMERY             474\n 7 TX    JOHNSON                429\n 8 TX    BELL                   413\n 9 TX    DALLAS                 406\n10 TX    DENTON                 394\n# … with 211 more rows\n```\n:::\n\n```{.r .cell-code}\ndata %>%\n  filter(`state`=='VA') %>%\n  arrange(desc(total_employees)) # 92 counties with \"Independent City\" being the anomaly. This could mean that these employees aren't counted as part of any of the counties, hence the high spread.\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 92 × 3\n   state county           total_employees\n   <chr> <chr>                      <dbl>\n 1 VA    INDEPENDENT CITY            3249\n 2 VA    BEDFORD                      395\n 3 VA    BOTETOURT                    288\n 4 VA    CHESTERFIELD                 228\n 5 VA    FAIRFAX                      225\n 6 VA    FRANKLIN                     202\n 7 VA    TAZEWELL                     197\n 8 VA    ROANOKE                      193\n 9 VA    RUSSELL                      172\n10 VA    HENRICO                      128\n# … with 82 more rows\n```\n:::\n:::\n\n\n### Explain and Interpret\n\nWe observed some interesting things in this data. We started by looking at all of the data as in challenge 1 and learn that the dataset is a record of employee counts who work in the railroad industry grouped by counties and their corresponding states, an interesting observation was that the `state` variable has 53 unique entries which means that the term is used loosely here and it also includes overseas employees. \n\nAfter that we used grouped summary statistics to look at the states with the highest and lowest employee counts along with the mean/median employee counts. We observed that some states have a high dispersion of employee count values across counties. This could be a useful metric to determine which counties are understaffed compared to what they need. `Texas` and `Virginia` jumped out to me during the analysis because the mean employee count was low and the standard deviation was very high. This could imply disproportionate allocation of resources, which seems true in the case of `Texas` but further analysis showed that `Virginia` uses a catchall term called `Independent City` to count employees that don't necessarily belong to a county. This accounts for most of the spread.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}