{
  "hash": "57130652f2dd3c5f87114100d52977e4",
  "result": {
    "markdown": "---\ntitle: \"Challenge 8 Submission\"\nauthor: \"Tanmay Agrawal\"\ndescription: \"Joining Data\"\ndate: \"1/30/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\n    df-print: paged\ncategories:\n  - challenge_8\n  - snl\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(purrr)\nlibrary(readxl)\nlibrary(dplyr)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in multiple data sets, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  join two or more data sets and analyze some aspect of the joined data\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nRead in one (or more) of the following datasets, using the correct R package and command.\n\n  - military marriages ⭐⭐\n  - faostat ⭐⭐\n  - railroads  ⭐⭐⭐\n  - fed_rate ⭐⭐⭐\n  - debt ⭐⭐⭐\n  - us_hh ⭐⭐⭐⭐\n  - snl ⭐⭐⭐⭐⭐\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\n\n# read all the csv files separately\nactors <- read_csv('_data/snl_actors.csv')\ncasts <- read_csv('_data/snl_casts.csv')\nseasons <- read_csv('_data/snl_seasons.csv')\n\nhead(actors)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"aid\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"url\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"type\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"gender\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Kate McKinnon\",\"2\":\"/Cast/?KaMc\",\"3\":\"cast\",\"4\":\"female\"},{\"1\":\"Alex Moffat\",\"2\":\"/Cast/?AlMo\",\"3\":\"cast\",\"4\":\"male\"},{\"1\":\"Ego Nwodim\",\"2\":\"/Cast/?EgNw\",\"3\":\"cast\",\"4\":\"unknown\"},{\"1\":\"Chris Redd\",\"2\":\"/Cast/?ChRe\",\"3\":\"cast\",\"4\":\"male\"},{\"1\":\"Kenan Thompson\",\"2\":\"/Cast/?KeTh\",\"3\":\"cast\",\"4\":\"male\"},{\"1\":\"Carey Mulligan\",\"2\":\"/Guests/?3677\",\"3\":\"guest\",\"4\":\"andy\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(casts)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"aid\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"sid\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"featured\"],\"name\":[3],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"first_epid\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"last_epid\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"update_anchor\"],\"name\":[6],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"n_episodes\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"season_fraction\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A. Whitney Brown\",\"2\":\"11\",\"3\":\"TRUE\",\"4\":\"19860222\",\"5\":\"NA\",\"6\":\"FALSE\",\"7\":\"8\",\"8\":\"0.4444444\"},{\"1\":\"A. Whitney Brown\",\"2\":\"12\",\"3\":\"TRUE\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"FALSE\",\"7\":\"20\",\"8\":\"1.0000000\"},{\"1\":\"A. Whitney Brown\",\"2\":\"13\",\"3\":\"TRUE\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"FALSE\",\"7\":\"13\",\"8\":\"1.0000000\"},{\"1\":\"A. Whitney Brown\",\"2\":\"14\",\"3\":\"TRUE\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"FALSE\",\"7\":\"20\",\"8\":\"1.0000000\"},{\"1\":\"A. Whitney Brown\",\"2\":\"15\",\"3\":\"TRUE\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"FALSE\",\"7\":\"20\",\"8\":\"1.0000000\"},{\"1\":\"A. Whitney Brown\",\"2\":\"16\",\"3\":\"TRUE\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"FALSE\",\"7\":\"20\",\"8\":\"1.0000000\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(seasons)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"sid\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"year\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"first_epid\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"last_epid\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"n_episodes\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"1975\",\"3\":\"19751011\",\"4\":\"19760731\",\"5\":\"24\"},{\"1\":\"2\",\"2\":\"1976\",\"3\":\"19760918\",\"4\":\"19770521\",\"5\":\"22\"},{\"1\":\"3\",\"2\":\"1977\",\"3\":\"19770924\",\"4\":\"19780520\",\"5\":\"20\"},{\"1\":\"4\",\"2\":\"1978\",\"3\":\"19781007\",\"4\":\"19790526\",\"5\":\"20\"},{\"1\":\"5\",\"2\":\"1979\",\"3\":\"19791013\",\"4\":\"19800524\",\"5\":\"20\"},{\"1\":\"6\",\"2\":\"1980\",\"3\":\"19801115\",\"4\":\"19810411\",\"5\":\"13\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n### Briefly describe the data\n\nThis dataset includes three CSV files related to the actors and seasons of a late-night comedy show. The first file `actors`, has the name, gender, and type of casting for each actor. The second files `casts`, shows the relationship between actors and the seasons they appeared in, including the number of episodes and other relevant information. The third one `seasons`, provides details about the year, number of episodes, and identifiers for first and last episodes for each season. \n\nWe can use the `casts` file to join `actors` and `seasons` and form a single file that contains all the information.\n\n\n## Tidy Data (as needed)\n\nData is tidy for the purposes of this challenge.\n\n## Join Data\n\n::: {.cell}\n\n```{.r .cell-code}\n# join sheets by `aid` and `sid`\njoined_data <- actors %>%\n    left_join(casts, by = 'aid') %>%\n    left_join(seasons, by = 'sid')\n\n# get rid of unwanted columns\njoined_data <- joined_data[ , -which(names(joined_data) %in% c(\"first_epid.x\", \"first_epid.y\", \"last_epid.x\", \"last_epid.y\"))]\n```\n:::\n\n\nBe sure to include a sanity check, and double-check that case count is correct!\n\n## Analysis\n\nWe can first plot female and male actors by season and then see a part-whole relationship with a stacked plot. Traditionally, women have been severely underrepresented in comedy. To observe the differences, a stacked plot is helpful because looking at the female data in isolation would show that the number of female actors increased and one could naively infer that SNL did a good job at balancing the gender ratio in their casting. Although, the picture becomes clearer when you look at the whole data and see that it's not so clear if they did.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\n# Filter the data to only include female actors\nfemale_actors <- filter(joined_data, gender == \"female\")\n\n# Group the data by season (sid) and count the number of actors in each season\nfemale_actors_per_season <- count(female_actors, sid)\n\n# Plot the number of female actors per season\nggplot(female_actors_per_season, aes(x = sid, y = n)) +\n  geom_bar(stat = \"identity\") +\n  xlab(\"Season\") +\n  ylab(\"Number of Female Actors\")\n```\n\n::: {.cell-output-display}\n![](challeng8_tanmay_agrawal_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\nmale_actors <- filter(joined_data, gender == \"male\")\nmale_actors_per_season <- count(male_actors, sid)\n\nggplot(male_actors_per_season, aes(x = sid, y = n)) +\n  geom_bar(stat = \"identity\") +\n  xlab(\"Season\") +\n  ylab(\"Number of Male Actors\")\n```\n\n::: {.cell-output-display}\n![](challeng8_tanmay_agrawal_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# Group the data by season (sid) and count the number of actors of each gender in each season\nactors_per_season <- count(joined_data, sid, gender)\n\n# Plot the proportion of male and female actors in each season\nggplot(actors_per_season, aes(x = sid, y = n, fill = gender)) +\n  geom_bar(stat = \"identity\") +\n  xlab(\"Season\") +\n  ylab(\"Number of Actors\") +\n  ggtitle(\"Proportion of Male and Female Actors in Each Season\") +\n  scale_fill_manual(values = c(\"#0072B2\", \"#D55E00\", \"#E69F00\"), name = \"Gender\") +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](challeng8_tanmay_agrawal_files/figure-html/unnamed-chunk-4-3.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challeng8_tanmay_agrawal_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}