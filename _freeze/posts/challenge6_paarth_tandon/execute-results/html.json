{
  "hash": "83e025a7fa28c60d1a3ecc0eb5dd8850",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Paarth Tandon\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"1/11/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\n    df-print: kable\ncategories:\n  - challenge_6\n  - hotel_bookings\n  - air_bnb\n  - fed_rate\n  - debt\n  - usa_hh\n  - abc_poll\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(readxl)\nlibrary(lubridate)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\n# read in the data using readr\ndebt_raw <- read_xlsx(\"_data/debt_in_trillions.xlsx\")\nhead(debt_raw, 5)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|Year and Quarter | Mortgage| HE Revolving| Auto Loan| Credit Card| Student Loan|  Other|  Total|\n|:----------------|--------:|------------:|---------:|-----------:|------------:|------:|------:|\n|03:Q1            |    4.942|        0.242|     0.641|       0.688|       0.2407| 0.4776| 7.2313|\n|03:Q2            |    5.080|        0.260|     0.622|       0.693|       0.2429| 0.4860| 7.3839|\n|03:Q3            |    5.183|        0.269|     0.684|       0.693|       0.2488| 0.4773| 7.5551|\n|03:Q4            |    5.660|        0.302|     0.704|       0.698|       0.2529| 0.4486| 8.0655|\n|04:Q1            |    5.840|        0.328|     0.720|       0.695|       0.2598| 0.4465| 8.2893|\n\n</div>\n:::\n:::\n\n\n### Briefly describe the data\n\nThis dataset accounts for debt in trillions in various categories. The categories include Mortgage, Revolving, Auto, Credit, Student, and other debt. The dataset also accounts for the total debt. The timescale of this dataset is per-quarter.\n\n## Tidy Data (as needed)\n\nThe main thing that needs to be changed is how the date is stored. Currently it is `YY:QQ`, where `YY` is the last two digits of the year, and `QQ` indicates the quarter. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt <- debt_raw %>%\n    mutate(date = parse_date_time(`Year and Quarter`, orders=\"yq\"))\nhead(debt$date)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2003-01-01 UTC\" \"2003-04-01 UTC\" \"2003-07-01 UTC\" \"2003-10-01 UTC\"\n[5] \"2004-01-01 UTC\" \"2004-04-01 UTC\"\n```\n:::\n:::\n\n\n## Time Dependent Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(debt, aes(x=date, y=Total)) +\n    ggtitle('Total Debt in Trillions of $') +\n    geom_line()\n```\n\n::: {.cell-output-display}\n![](challenge6_paarth_tandon_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nI chose this graph because `Total` is a metric of change over time.\n\n## Visualizing Part-Whole Relationships\n\nI want to create a stacked area plot to show each category of depth individually. To do this, I need to pivot the data so that one of the columns represents the type of debt.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt_piv <- debt %>%\n    pivot_longer(\n        cols = c(`Mortgage`, `HE Revolving`, `Auto Loan`, `Credit Card`, `Student Loan`, `Other`),\n        names_to = \"Loan Type\", \n        values_to = \"Loan Value\"\n    )\nhead(debt_piv)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|Year and Quarter |  Total|date       |Loan Type    | Loan Value|\n|:----------------|------:|:----------|:------------|----------:|\n|03:Q1            | 7.2313|2003-01-01 |Mortgage     |     4.9420|\n|03:Q1            | 7.2313|2003-01-01 |HE Revolving |     0.2420|\n|03:Q1            | 7.2313|2003-01-01 |Auto Loan    |     0.6410|\n|03:Q1            | 7.2313|2003-01-01 |Credit Card  |     0.6880|\n|03:Q1            | 7.2313|2003-01-01 |Student Loan |     0.2407|\n|03:Q1            | 7.2313|2003-01-01 |Other        |     0.4776|\n\n</div>\n:::\n:::\n\n\nNow I can create the plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(debt_piv, aes(x=`date`, y=`Loan Value`, fill=`Loan Type`)) +\n    ggtitle('Total Debt in Trillions of $') +\n    geom_area()\n```\n\n::: {.cell-output-display}\n![](challenge6_paarth_tandon_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "challenge6_paarth_tandon_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}