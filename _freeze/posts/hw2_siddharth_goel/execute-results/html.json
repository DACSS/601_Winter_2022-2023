{
  "hash": "dc5fc9983e6ab047305a05de09677681",
  "result": {
    "markdown": "---\ntitle: \"Homework 2\"\nauthor: \"Siddharth Goel\"\ndesription: \"Homework 2: Reading in Data\"\ndate: \"01/16/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\n    df-print: paged\ncategories:\n  - hw2\n  - hotel_bookings.csv\n---\n\n\n### Importing the libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0      ✔ purrr   1.0.1 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.5.0 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n:::\n\n\n### Reading the dataset\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata = read_csv(\"S:/Winter 2022/601 - Intro to Data Science/601_Winter_2022-2023/posts/_data/hotel_bookings.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 119390 Columns: 32\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (13): hotel, arrival_date_month, meal, country, market_segment, distrib...\ndbl  (18): is_canceled, lead_time, arrival_date_year, arrival_date_week_numb...\ndate  (1): reservation_status_date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n## Taking an initial look into the data\n\n::: {.cell}\n\n```{.r .cell-code}\n# looking at the schema\nspec(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ncols(\n  hotel = col_character(),\n  is_canceled = col_double(),\n  lead_time = col_double(),\n  arrival_date_year = col_double(),\n  arrival_date_month = col_character(),\n  arrival_date_week_number = col_double(),\n  arrival_date_day_of_month = col_double(),\n  stays_in_weekend_nights = col_double(),\n  stays_in_week_nights = col_double(),\n  adults = col_double(),\n  children = col_double(),\n  babies = col_double(),\n  meal = col_character(),\n  country = col_character(),\n  market_segment = col_character(),\n  distribution_channel = col_character(),\n  is_repeated_guest = col_double(),\n  previous_cancellations = col_double(),\n  previous_bookings_not_canceled = col_double(),\n  reserved_room_type = col_character(),\n  assigned_room_type = col_character(),\n  booking_changes = col_double(),\n  deposit_type = col_character(),\n  agent = col_character(),\n  company = col_character(),\n  days_in_waiting_list = col_double(),\n  customer_type = col_character(),\n  adr = col_double(),\n  required_car_parking_spaces = col_double(),\n  total_of_special_requests = col_double(),\n  reservation_status = col_character(),\n  reservation_status_date = col_date(format = \"\")\n)\n```\n:::\n\n```{.r .cell-code}\n# looking at the data values\nhead(data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"hotel\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"is_canceled\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"lead_time\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"arrival_date_year\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"arrival_date_month\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"arrival_date_week_number\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"arrival_date_day_of_month\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"stays_in_weekend_nights\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"stays_in_week_nights\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"adults\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"children\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"babies\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"meal\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"country\"],\"name\":[14],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"market_segment\"],\"name\":[15],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"distribution_channel\"],\"name\":[16],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"is_repeated_guest\"],\"name\":[17],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"previous_cancellations\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"previous_bookings_not_canceled\"],\"name\":[19],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"reserved_room_type\"],\"name\":[20],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"assigned_room_type\"],\"name\":[21],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"booking_changes\"],\"name\":[22],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"deposit_type\"],\"name\":[23],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"agent\"],\"name\":[24],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"company\"],\"name\":[25],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"days_in_waiting_list\"],\"name\":[26],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"customer_type\"],\"name\":[27],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"adr\"],\"name\":[28],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"required_car_parking_spaces\"],\"name\":[29],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"total_of_special_requests\"],\"name\":[30],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"reservation_status\"],\"name\":[31],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"reservation_status_date\"],\"name\":[32],\"type\":[\"date\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Resort Hotel\",\"2\":\"0\",\"3\":\"342\",\"4\":\"2015\",\"5\":\"July\",\"6\":\"27\",\"7\":\"1\",\"8\":\"0\",\"9\":\"0\",\"10\":\"2\",\"11\":\"0\",\"12\":\"0\",\"13\":\"BB\",\"14\":\"PRT\",\"15\":\"Direct\",\"16\":\"Direct\",\"17\":\"0\",\"18\":\"0\",\"19\":\"0\",\"20\":\"C\",\"21\":\"C\",\"22\":\"3\",\"23\":\"No Deposit\",\"24\":\"NULL\",\"25\":\"NULL\",\"26\":\"0\",\"27\":\"Transient\",\"28\":\"0\",\"29\":\"0\",\"30\":\"0\",\"31\":\"Check-Out\",\"32\":\"2015-07-01\"},{\"1\":\"Resort Hotel\",\"2\":\"0\",\"3\":\"737\",\"4\":\"2015\",\"5\":\"July\",\"6\":\"27\",\"7\":\"1\",\"8\":\"0\",\"9\":\"0\",\"10\":\"2\",\"11\":\"0\",\"12\":\"0\",\"13\":\"BB\",\"14\":\"PRT\",\"15\":\"Direct\",\"16\":\"Direct\",\"17\":\"0\",\"18\":\"0\",\"19\":\"0\",\"20\":\"C\",\"21\":\"C\",\"22\":\"4\",\"23\":\"No Deposit\",\"24\":\"NULL\",\"25\":\"NULL\",\"26\":\"0\",\"27\":\"Transient\",\"28\":\"0\",\"29\":\"0\",\"30\":\"0\",\"31\":\"Check-Out\",\"32\":\"2015-07-01\"},{\"1\":\"Resort Hotel\",\"2\":\"0\",\"3\":\"7\",\"4\":\"2015\",\"5\":\"July\",\"6\":\"27\",\"7\":\"1\",\"8\":\"0\",\"9\":\"1\",\"10\":\"1\",\"11\":\"0\",\"12\":\"0\",\"13\":\"BB\",\"14\":\"GBR\",\"15\":\"Direct\",\"16\":\"Direct\",\"17\":\"0\",\"18\":\"0\",\"19\":\"0\",\"20\":\"A\",\"21\":\"C\",\"22\":\"0\",\"23\":\"No Deposit\",\"24\":\"NULL\",\"25\":\"NULL\",\"26\":\"0\",\"27\":\"Transient\",\"28\":\"75\",\"29\":\"0\",\"30\":\"0\",\"31\":\"Check-Out\",\"32\":\"2015-07-02\"},{\"1\":\"Resort Hotel\",\"2\":\"0\",\"3\":\"13\",\"4\":\"2015\",\"5\":\"July\",\"6\":\"27\",\"7\":\"1\",\"8\":\"0\",\"9\":\"1\",\"10\":\"1\",\"11\":\"0\",\"12\":\"0\",\"13\":\"BB\",\"14\":\"GBR\",\"15\":\"Corporate\",\"16\":\"Corporate\",\"17\":\"0\",\"18\":\"0\",\"19\":\"0\",\"20\":\"A\",\"21\":\"A\",\"22\":\"0\",\"23\":\"No Deposit\",\"24\":\"304\",\"25\":\"NULL\",\"26\":\"0\",\"27\":\"Transient\",\"28\":\"75\",\"29\":\"0\",\"30\":\"0\",\"31\":\"Check-Out\",\"32\":\"2015-07-02\"},{\"1\":\"Resort Hotel\",\"2\":\"0\",\"3\":\"14\",\"4\":\"2015\",\"5\":\"July\",\"6\":\"27\",\"7\":\"1\",\"8\":\"0\",\"9\":\"2\",\"10\":\"2\",\"11\":\"0\",\"12\":\"0\",\"13\":\"BB\",\"14\":\"GBR\",\"15\":\"Online TA\",\"16\":\"TA/TO\",\"17\":\"0\",\"18\":\"0\",\"19\":\"0\",\"20\":\"A\",\"21\":\"A\",\"22\":\"0\",\"23\":\"No Deposit\",\"24\":\"240\",\"25\":\"NULL\",\"26\":\"0\",\"27\":\"Transient\",\"28\":\"98\",\"29\":\"0\",\"30\":\"1\",\"31\":\"Check-Out\",\"32\":\"2015-07-03\"},{\"1\":\"Resort Hotel\",\"2\":\"0\",\"3\":\"14\",\"4\":\"2015\",\"5\":\"July\",\"6\":\"27\",\"7\":\"1\",\"8\":\"0\",\"9\":\"2\",\"10\":\"2\",\"11\":\"0\",\"12\":\"0\",\"13\":\"BB\",\"14\":\"GBR\",\"15\":\"Online TA\",\"16\":\"TA/TO\",\"17\":\"0\",\"18\":\"0\",\"19\":\"0\",\"20\":\"A\",\"21\":\"A\",\"22\":\"0\",\"23\":\"No Deposit\",\"24\":\"240\",\"25\":\"NULL\",\"26\":\"0\",\"27\":\"Transient\",\"28\":\"98\",\"29\":\"0\",\"30\":\"1\",\"31\":\"Check-Out\",\"32\":\"2015-07-03\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nWe got the descriptors of each column by using the `spec` method.\nThe complete schema of the data was shown in this command. The noticeable points were the varying data types of the columns.  \nColumns like `hotel` and `meal` have the data type `col_character` which indicates a text data type. `lead_time` is of the type `col_double` which is used for numerical values and the column `reservation_status_date` is of the type `col_date` which is used for date type values.  \nWe can also see that the dataset has `119390` total rows and `32` columns.\n\n\n## Cleaning the data\n\nBy looking at the top values in the dataset, character type columns with values such as `NULL` can be noticed. Also, `0` valued numerical columns can be seen in the dataset as well. It will be great to find out the percentage of these values in the columns and remove these columns if the percentages are high. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# get zero percentage in data\nzero_percent <- (colSums(data == 0) / nrow(data)) * 100\n# get null percent in data\nnull_percent <- sapply(data, function(x) sum(str_detect(x, \"NULL\")) / length(x))\n\naggregated_df <- data.frame(null_percent = null_percent, zero_percent = zero_percent)\n\narrange(aggregated_df, desc(null_percent), desc(zero_percent))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"null_percent\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"zero_percent\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0.943068934\",\"2\":\"0.0000000\",\"_rn_\":\"company\"},{\"1\":\"0.136862384\",\"2\":\"0.0000000\",\"_rn_\":\"agent\"},{\"1\":\"0.004087445\",\"2\":\"0.0000000\",\"_rn_\":\"country\"},{\"1\":\"0.000000000\",\"2\":\"99.2319290\",\"_rn_\":\"babies\"},{\"1\":\"0.000000000\",\"2\":\"96.9679203\",\"_rn_\":\"previous_bookings_not_canceled\"},{\"1\":\"0.000000000\",\"2\":\"96.9025882\",\"_rn_\":\"days_in_waiting_list\"},{\"1\":\"0.000000000\",\"2\":\"96.8087780\",\"_rn_\":\"is_repeated_guest\"},{\"1\":\"0.000000000\",\"2\":\"94.5690594\",\"_rn_\":\"previous_cancellations\"},{\"1\":\"0.000000000\",\"2\":\"93.7884245\",\"_rn_\":\"required_car_parking_spaces\"},{\"1\":\"0.000000000\",\"2\":\"84.8597035\",\"_rn_\":\"booking_changes\"},{\"1\":\"0.000000000\",\"2\":\"62.9583717\",\"_rn_\":\"is_canceled\"},{\"1\":\"0.000000000\",\"2\":\"58.8977301\",\"_rn_\":\"total_of_special_requests\"},{\"1\":\"0.000000000\",\"2\":\"43.5530614\",\"_rn_\":\"stays_in_weekend_nights\"},{\"1\":\"0.000000000\",\"2\":\"6.4033839\",\"_rn_\":\"stays_in_week_nights\"},{\"1\":\"0.000000000\",\"2\":\"5.3145155\",\"_rn_\":\"lead_time\"},{\"1\":\"0.000000000\",\"2\":\"1.6408409\",\"_rn_\":\"adr\"},{\"1\":\"0.000000000\",\"2\":\"0.3375492\",\"_rn_\":\"adults\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"hotel\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"arrival_date_year\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"arrival_date_month\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"arrival_date_week_number\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"arrival_date_day_of_month\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"meal\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"market_segment\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"distribution_channel\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"reserved_room_type\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"assigned_room_type\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"deposit_type\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"customer_type\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"reservation_status\"},{\"1\":\"0.000000000\",\"2\":\"0.0000000\",\"_rn_\":\"reservation_status_date\"},{\"1\":\"NA\",\"2\":\"NA\",\"_rn_\":\"children\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nAs we can see from the stats above, it is safe to remove columns `company` and `babies` due to the high percentage of insignificant `\"NULL\"` and `0` values. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nfiltered_data = select(data, -company, -babies)\nspec(filtered_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNULL\n```\n:::\n:::\n\n\nAs we can see now, the 2 columns have been removed from the data and the data is ready for interpretations\n.\n## Research opportunities within the data\n\nFollowing are the columns and the corresponding research questions in the data:\n\n* `children` and `adults`: These columns will help determine the ratio between adults and children. If the ratio points out that more children stay in the hotel, then those hotels can be made more kids friendly to increase ratings\n* `stays_in_week_nights` and `stays_in_weekend_nights`: These columns can be used to calculate the footfall of customers during weekdays and weekends and together with the `customer_type` column, we can find out the demographic which tye of customers come in during what time of the week. This can be used to determine pricing\n* `meal`: Meal column can be used to anticipate the type of meals the guests prefer\n* `is_repeated_guest`: This column can be used to provide special offers to repeat guests\n* `previous_cancellations` and `previous_bookings_not_canceled`: These columns can be used to anticipate which type of guests are more likely to cancel their booking_changes\n* `agent`: This column can be used to calculate agent performance for bonus and commission related purposes\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}