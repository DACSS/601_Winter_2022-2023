{
  "hash": "90f25a721b01133fec1e9c4440367f07",
  "result": {
    "markdown": "---\ntitle: \"Challenge 3\"\nauthor: \"Paarth Tandon\"\ndescription: \"Tidy Data: Pivoting\"\ndate: \"01/02/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\n    df-print: kable\ncategories:\n  - challenge_3\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read in the data using readr\nanimals <- read_csv(\"_data/animal_weight.csv\")\n# view a few data points\nanimals\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|IPCC Area           | Cattle - dairy| Cattle - non-dairy| Buffaloes| Swine - market| Swine - breeding| Chicken - Broilers| Chicken - Layers| Ducks| Turkeys| Sheep| Goats| Horses| Asses| Mules| Camels| Llamas|\n|:-------------------|--------------:|------------------:|---------:|--------------:|----------------:|------------------:|----------------:|-----:|-------:|-----:|-----:|------:|-----:|-----:|------:|------:|\n|Indian Subcontinent |            275|                110|       295|             28|               28|                0.9|              1.8|   2.7|     6.8|  28.0|  30.0|    238|   130|   130|    217|    217|\n|Eastern Europe      |            550|                391|       380|             50|              180|                0.9|              1.8|   2.7|     6.8|  48.5|  38.5|    377|   130|   130|    217|    217|\n|Africa              |            275|                173|       380|             28|               28|                0.9|              1.8|   2.7|     6.8|  28.0|  30.0|    238|   130|   130|    217|    217|\n|Oceania             |            500|                330|       380|             45|              180|                0.9|              1.8|   2.7|     6.8|  48.5|  38.5|    377|   130|   130|    217|    217|\n|Western Europe      |            600|                420|       380|             50|              198|                0.9|              1.8|   2.7|     6.8|  48.5|  38.5|    377|   130|   130|    217|    217|\n|Latin America       |            400|                305|       380|             28|               28|                0.9|              1.8|   2.7|     6.8|  28.0|  30.0|    238|   130|   130|    217|    217|\n|Asia                |            350|                391|       380|             50|              180|                0.9|              1.8|   2.7|     6.8|  48.5|  38.5|    377|   130|   130|    217|    217|\n|Middle east         |            275|                173|       380|             28|               28|                0.9|              1.8|   2.7|     6.8|  28.0|  30.0|    238|   130|   130|    217|    217|\n|Northern America    |            604|                389|       380|             46|              198|                0.9|              1.8|   2.7|     6.8|  48.5|  38.5|    377|   130|   130|    217|    217|\n\n</div>\n:::\n\n```{.r .cell-code}\n# view all columns\ncolnames(animals)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"IPCC Area\"          \"Cattle - dairy\"     \"Cattle - non-dairy\"\n [4] \"Buffaloes\"          \"Swine - market\"     \"Swine - breeding\"  \n [7] \"Chicken - Broilers\" \"Chicken - Layers\"   \"Ducks\"             \n[10] \"Turkeys\"            \"Sheep\"              \"Goats\"             \n[13] \"Horses\"             \"Asses\"              \"Mules\"             \n[16] \"Camels\"             \"Llamas\"            \n```\n:::\n:::\n\n\n### Briefly describe the data\n\nThis csv file tracks the weights of various animals in different zones of the world. The zones included are the Indian Subcontinent, Eastern Europe, Africa, Oceania, Western Europe, Latin America, Asia, Middle east, and Northern America. There are 16 different type of animals.\n\nCurrently each animal is represented as a column, which is not very tidy. I would like to pivot the dataframe so that there are only three columns: area, animal type, and weight. This means that I have to pivot each of the 16 animal columns.\n\n## Anticipate the End Result\n\nIn this case, $n=9$ and $k=17$. I will be using $1$ of those variables to identify a case, so I will be pivoting $17-1=16$ variables. The type of animal will go into the `animal_type` column, and the weight will go into the `weight` column. I would expect $9*16=144$ rows in the pivoted dataframe. Since I would be converting those $16$ columns into $2$ columns, there would be $3$ columns in the pivoted dataframe.\n\n### Challenge: Describe the final dimensions\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#existing rows/cases\nnrow(animals)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 9\n```\n:::\n\n```{.r .cell-code}\n#existing columns/cases\nncol(animals)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 17\n```\n:::\n\n```{.r .cell-code}\n#expected rows/cases\nnrow(animals) * (ncol(animals)-1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 144\n```\n:::\n\n```{.r .cell-code}\n# expected columns \n1 + 2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3\n```\n:::\n:::\n\n\nThis pivot will make the data much easier to parse using `R`, since each \"case\" described by a row is one weight, instead of a vector of weights. Yes, this increases the number of samples, but this level of granularity will make calculating statistics about the weights themselves much easier.\n\n## Pivot the Data\n\n### Challenge: Pivot the Chosen Data\n\nEach \"case\" described by a row is one weight, instead of a vector of weights. This increases the number of samples, but this level of granularity will make calculating statistics about the weights themselves much easier.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#-1 removes the columns we want to keep\ncols <- colnames(animals)[-1]\n\nanimals_pivoted<-pivot_longer(animals, col = cols,\n                names_to=\"animal_type\",\n                values_to = \"weight\")\n\nanimals_pivoted[sample(nrow(animals_pivoted), 10), ]\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|IPCC Area        |animal_type        | weight|\n|:----------------|:------------------|------:|\n|Latin America    |Cattle - non-dairy |  305.0|\n|Latin America    |Camels             |  217.0|\n|Western Europe   |Cattle - non-dairy |  420.0|\n|Northern America |Sheep              |   48.5|\n|Latin America    |Goats              |   30.0|\n|Middle east      |Swine - breeding   |   28.0|\n|Asia             |Chicken - Layers   |    1.8|\n|Africa           |Cattle - non-dairy |  173.0|\n|Asia             |Ducks              |    2.7|\n|Africa           |Ducks              |    2.7|\n\n</div>\n:::\n\n```{.r .cell-code}\ndim(animals_pivoted)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 144   3\n```\n:::\n:::\n\n\nAs we can see in the code output (sample), our calculations were accurate.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}