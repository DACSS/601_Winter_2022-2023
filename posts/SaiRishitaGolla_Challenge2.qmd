---
title: "Challenge 2"
author: "Sai Rishita Golla"
description: "Data wrangling: using group() and summarise()"
date: "01/03/2023"
format:
  html:
    toc: true
    code-fold: true
    code-copy: true
    code-tools: true
categories:
  - challenge_2
---

```{r}
#| label: setup
#| warning: false
#| message: false
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)
```
## Read in the Data
```{r}
library(readr)
data <- read_csv("_data/hotel_bookings.csv")
```
```{r}
view(data)
```

Using the view() command, we see that the there are 119,390 rows for hotel entries and 32 columns for information such as reserved room type, deposit type, reservation status, adults (number), country etc.

```{r}
#| label: summary of the data
summary(data)
```

```{r}
#| label: column names the data
colnames(data)
```
```{r}
unique(data$hotel)

unique(data$country)
length(unique(data$country))

unique(data$market_segment)
length(unique(data$market_segment))

unique(data$distribution_channel)
length(unique(data$distribution_channel))

unique(data$customer_type)
length(unique(data$customer_type))
```
After analysing the summary() and above commands in R, we can conclude that the data has been collected from 178 countries over a span of 4 years (2014 - 17), going by the reservation dates. We can further conclude that most of the data collected is from 2016 - 17 as the Q1 of reservation status date lies in 2016. It is also clear that there are two kind of hotels (Resort and City Hotel), and 8 types of market segments. From the summary we can also observe that most bookings have adults followed by children and then babies. Further, on an average stay is booked for 2.5 days during week days and around for a day during weekends.

## Provide Grouped Summary Statistics

```{r}
hotel_data <- data %>%
  group_by(hotel)

view(hotel_data)
```

```{r}
hotel_data %>%
summarise(week_count = mean(stays_in_week_nights),
          weekend_count = mean(stays_in_weekend_nights))
```

```{r}
hotel_data %>%
summarise(cancelled_count = sum(is_canceled))
```

```{r}
hotel_data %>%
summarise(adults = sum(adults),
          children = sum(children, na.rm = TRUE),
          babies = sum(babies))
```
### Explain and Interpret

We first group hotels by their type - City and Resort. After calculating the mean for stays_in_week_nights and stays_in_weekend_nights we see that the resort bookings are longer. Further, the number of cancelled reservations for resort bookings are lesser. These results might be because resort bookings are generally planned way ahead unlike city hotel bookings. We also see that there are more city hotel bookings and the number of adults are more followed by childen and then babies.